<script>

function showView(data){
  // clear previous values
  clearSingleView()
  
  var singleView = document.getElementsByClassName('singleView')[0]
  var singleViewQuit = document.getElementsByClassName('singleViewQuit')[0]
  singleView.style.display = 'flex'
  singleViewQuit.style.display = 'block'
  
  document.getElementById('singleBuyerName').innerHTML = data.buyerName
  
  if (data.email != 'undefined' && data.email != 'null'){
    setInnerHTML('singleEmail', '<a href="mailto:' + data.email + '">' + data.email + '</a>', 'Email: ')
  }
  if (data.dynamicsLink != 'undefined' && data.dynamicsLink != 'null'){
    setInnerHTML('singleDynamicsLink', '<a href="' + data.dynamicsLink + '">' + data.dynamicsLink + '</a>', 'Dynamics: ')
  }
  if (data.toolsLink != 'undefined' && data.toolsLink != 'null'){
    setInnerHTML('singleToolsLink', '<a href="' + data.toolsLink + '">' + data.toolsLink + '</a>', 'Tools: ')
  }
  if (data.stage == 'UC' || data.stage == 'Closed'){
    setInnerHTML('singleUnderContractDate', data.underContractDate, 'UC Date: ', true)
    setInnerHTML('singleDueDiligenceDate', data.dueDiligenceDate, 'Due Diligence Deadline: ', true)
    setInnerHTML('singleFinancingDate', data.financingDate, 'F&A Deadline: ', true)
    setInnerHTML('singleSettlementDate', data.settlementDate, 'Settlement Deadline: ', true)
    
    if (data.stage == 'UC'){
      setInnerHTML('singleClosedDate', data.closedDate, 'Closed Date: ', true)
    }
  }
  
  setInnerHTML('singlePhone', data.phone, 'Phone: ')
  setInnerHTML('singleListingAgent', data.listingAgent, 'Referrer: ')
  setInnerHTML('singleStage', data.stage, 'Stage: ')
  // setInnerHTML('singleCommission', data.commission, 'Commission: ')
  setInnerHTML('singleSource', data.source, 'Source: ')
  setInnerHTML('singleExpectedClose', data.expectedClose, 'Expected Close: ', true)
  setInnerHTML('singleBuyerAgent', data.buyerAgent, 'Buyer Agent: ')
  setInnerHTML('singleStatus', data.status, 'Status: ')
  setInnerHTML('singleLossReason', data.lossReason, 'Loss Reason: ')
  setInnerHTML('singleListingAgentManager', data.listingAgentManager, 'LA Manager: ')
  setInnerHTML('singleTags', data.tags, 'Tags: ')
  setInnerHTML('singleMonth', data.month, 'Month: ')
  setInnerHTML('singleYear', data.year, 'Year: ')
  // setInnerHTML('singleMonthYear', data.monthYear)
  setInnerHTML('singleAddress', data.address, 'Address: ')
  setInnerHTML('singleListedPrice', data.listedPrice, 'Listed Price: ')
  setInnerHTML('singleDateCreated', data.dateCreated, 'Date Created: ', true)
  setInnerHTML('singleNotes', data.notes, 'Notes: ')
  setInnerHTML('singleLastUpdated', data.lastUpdated, 'Last Updated: ', true)
  setInnerHTML('singleCommissionDate', data.commissionDate, 'Commission Date: ', true)
}

function setInnerHTML(id, val, title, isDate = false){
  var e = document.getElementById(id)
  if (val != 'undefined' && val != 'null' && val != 'NaN'){
    e.innerHTML = title + val
    e.style.display = 'block'
    e.style.margin = '5px'
  }
  else {
    // e.innerHTML = ''
  }
  
  // if value is a date, format view
  if (isDate){
    var date = new Date(Number(val))
    var dateStr = convertDate(date)
    dateStr = dateStr.split(' 0:00')[0]
    e.innerHTML = title + dateStr
  }
}

function quitView(){
  var singleView = document.getElementsByClassName('singleView')[0]
  var singleViewQuit = document.getElementsByClassName('singleViewQuit')[0]
  singleView.style.display = 'none'
  singleViewQuit.style.display = 'none'
}

function clearSingleView(){
  document.getElementById('singleBuyerName').innerHTML = ''
  document.getElementById('singlePhone').innerHTML = ''
  document.getElementById('singleEmail').innerHTML = ''
  document.getElementById('singleDynamicsLink').innerHTML = ''
  document.getElementById('singleToolsLink').innerHTML = ''
  document.getElementById('singleListingAgent').innerHTML = ''
  document.getElementById('singleStage').innerHTML = ''
  // setInnerHTML('singleCommission', data.commission, 'Commission: ')
  document.getElementById('singleSource').innerHTML = ''
  document.getElementById('singleExpectedClose').innerHTML = ''
  document.getElementById('singleBuyerAgent').innerHTML = ''
  document.getElementById('singleStatus').innerHTML = ''
  document.getElementById('singleLossReason').innerHTML = ''
  document.getElementById('singleListingAgentManager').innerHTML = ''
  document.getElementById('singleTags').innerHTML = ''
  document.getElementById('singleMonth').innerHTML = ''
  document.getElementById('singleYear').innerHTML = ''
  // setInnerHTML('singleMonthYear', data.monthYear)
  document.getElementById('singleAddress').innerHTML = ''
  document.getElementById('singleListedPrice').innerHTML = ''
  document.getElementById('singleUnderContractDate').innerHTML = ''
  document.getElementById('singleDueDiligenceDate').innerHTML = ''
  document.getElementById('singleFinancingDate').innerHTML = ''
  document.getElementById('singleSettlementDate').innerHTML = ''
  document.getElementById('singleClosedDate').innerHTML = ''
  document.getElementById('singleDateCreated').innerHTML = ''
  document.getElementById('singleNotes').innerHTML = ''
  document.getElementById('singleLastUpdated').innerHTML = ''
  document.getElementById('singleCommissionDate').innerHTML = ''
}

</script>